<nz-page-header class="mobile-header" nzTitle="Pacientes Agendados"></nz-page-header>
<nz-divider></nz-divider>
<form nz-form nzLayout="vertical" [formGroup]="filterSchedulesForm" (ngSubmit)="getProfissionalSchedules()">
  <h1>Filtros</h1>
  <nz-row nzGutter="12">

    <nz-col nzSm="12" nzXs="24">
      <nz-form-item>
        <nz-form-label>Nome do paciente</nz-form-label>
        <nz-form-control nzErrorTip="Informe um nome válido">
          <input formControlName="username" nz-input placeholder="Nome do paciente"/>
        </nz-form-control>
      </nz-form-item>
    </nz-col>


    <nz-col nzSm="12" nzXs="24">
      <nz-form-item>
        <nz-form-label>Data da consulta</nz-form-label>
        <nz-form-control>
          <nz-date-picker
            formControlName="birth">
          </nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

  </nz-row>
  <nz-row>
    <nz-col class="button-group" nzSpan="24">
      <button
        nz-button
        nzSize="large"
        type="button"
        style="margin-right: 5px"
        [nzLoading]="isLoading"
        [disabled]="isLoading"
      >
        Limpar
      </button>
      <button
        nz-button
        nzType="primary"
        nzSize="large"
        type="submit"
        [disabled]="isLoading"
        [nzLoading]="isLoading"
      >
        <i nz-icon nzType="search" nzTheme="outline"></i>
        Filtrar
      </button>

    </nz-col>
  </nz-row>
</form>

<nz-spin [nzSpinning]="isLoading">
  <nz-divider
    nzText="Encontrados: {{ totalSchedules }} "
    nzOrientation="left"
    *ngIf="!!totalSchedules"></nz-divider>
  <div nz-row class="table-responsive">
    <nz-table
      nzShowSizeChanger
      [nzData]="schedulesData"
      nzSize="default"
      [nzFrontPagination]="false"
      [nzShowPagination]="showPagination"
      [nzTotal]="totalSchedules"
      [nzPageIndex]="pageIndex"
      [nzPageSize]="pageSize"
      (nzPageIndexChange)="onPageIndexChange($event)"
      (nzPageSizeChange)="onPageSizeChange($event)"
    >


    <thead>
    <tr>
      <th>Ações</th>
      <th>Paciente</th>
      <th>Data da consulta</th>
      <th>Responsavel pela consulta</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let schedule of schedulesData">
      <td>
        <button
          nz-button
          nzShape="circle"
          title="Cancelar consulta"
          style="margin-left: 5px"
          nz-tooltip
          [nzTooltipTitle]="'Cancelar consulta'"
        >
          <span nz-icon nzType="close-circle" nzTheme="outline"></span>
        </button>
        <button
          nz-button
          nzShape="circle"
          title="Confirmar consulta"
          style="margin-left: 5px"
          nz-tooltip
          [nzTooltipTitle]="'Confirmar consulta'"
        >
          <span nz-icon nzType="check-circle" nzTheme="outline"></span>
        </button>
      </td>

      <td>{{schedule.pacientName}}</td>
      <td>{{ schedule.appointmentDateTime | date:'dd/MM/yyyy HH:mm' }}</td>
      <td>{{schedule.profissionalName}}</td>

    </tr>
    </tbody>
    </nz-table>
  </div>

</nz-spin>


